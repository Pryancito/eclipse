[package]
name = "eclipse_kernel"
version = "0.1.0"
edition = "2021"
authors = ["Eclipse Rust Team"]
description = "Kernel nativo de Eclipse en Rust"

[lib]
name = "eclipse_kernel"
crate-type = ["lib", "staticlib"]

[[bin]]
name = "eclipse_kernel"
path = "src/main.rs"

# build-dependencies removidas - usamos nasm directamente

[dependencies]
x86_64 = "0.14.9"
bootloader = { version = "0.9.8", features = ["map_physical_memory"] }
volatile = "0.2.6"
heapless = "0.8"
linked_list_allocator = "0.10"
eclipsefs-lib = { path = "../eclipsefs-lib", default-features = false, features = ["alloc"] }
# Dependencias para acceso a hardware PCI/MMIO
bitflags = "2.4"
zerocopy = { version = "0.8", default-features = false, features = ["derive"] }
# Dependencias para modelos de IA reales (compatibles con no_std)
# Dependencias para matemáticas
lazy_static = { version = "1.4.0", features = ["spin_no_std"] }
num-traits = { version = "0.2", optional = true, default-features = false }
# Dependencias para Wayland (simplificadas para no_std)
# wayland-client = { version = "0.29", optional = true, default-features = false }
# wayland-server = { version = "0.29", optional = true, default-features = false }
# Dependencias para renderización
# khronos-egl = { version = "4.1", optional = true, default-features = false }
# Dependencias para COSMIC Desktop Environment (simuladas)
# Nota: Las dependencias reales de COSMIC no son compatibles con no_std
# Usamos implementaciones propias que simulan la funcionalidad
# Dependencias para GUI moderna (Kazari - compatible con no_std)
# kazari = { version = "0.0.1", optional = true, default-features = false }
vte = { version = "0.11.0", default-features = false, optional = true }
# NUEVO: para operaciones I/O en drivers
x86 = "0.52.0"
hashbrown = "0.14"
spin = "0.9"
virtio-drivers-and-devices = "0.2.3"
virtio-spec = "0.3.2"
polished_pci = { version = "0.2.2", default-features = false }
xhci = { version = "0.9", default-features = false }

[features]
default = ["no_std", "alloc"]
no_std = []
hardware-debug = []
safe-init = []
alloc = []
# Características para modelos de IA reales
ai-models = ["dep:num-traits"]
# Características para GUI moderna con Kazari
# kazari-gui = ["dep:kazari"]
# Características para Wayland (simplificadas)
# wayland-server = ["dep:wayland-server"]
# wayland-client = ["dep:wayland-client"]
# wayland-egl = ["dep:wayland-client", "dep:khronos-egl"]
# wayland-full = ["dep:wayland-server", "dep:wayland-client", "dep:khronos-egl"]
# Características para COSMIC Desktop Environment (simuladas)
cosmic-desktop = []
cosmic-compositor = []
cosmic-applets = []
cosmic-full = []

[profile.dev]
panic = "abort"
lto = false
opt-level = "z"
overflow-checks = false

[profile.release]
panic = "abort"
lto = true
opt-level = "z"
overflow-checks = false

[target.x86_64-unknown-none]
rustflags = [
    "-C", "link-arg=-T/home/moebius/eclipse/eclipse_kernel/linker.ld",
    "-C", "link-arg=--gc-sections"
]

